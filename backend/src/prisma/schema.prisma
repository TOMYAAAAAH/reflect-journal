generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "mysql"
}

model answers {
  id          Int       @id @default(autoincrement())
  user_id     Int
  question_id Int
  answer_text String    @db.Text
  year        Int
  created_at  DateTime  @default(now()) @db.Timestamp(0)
  users       users     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "answers_ibfk_1")
  questions   questions @relation(fields: [question_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "answers_ibfk_2")

  @@unique([user_id, question_id, year], map: "unique_answer")
  @@index([question_id], map: "idx_answers_question")
  @@index([user_id], map: "idx_answers_user")
  @@index([year], map: "idx_answers_year")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model questions {
  id            Int       @id @default(autoincrement())
  day           Int
  month         Int
  question_text String    @db.Text
  playlist_id   Int       @default(1)
  answers       answers[]

  @@unique([day, month, playlist_id], map: "unique_question")
  @@index([day, month], map: "idx_day_month")
  @@index([playlist_id], map: "idx_questions_playlist")
}

model users {
  id                  Int       @id @default(autoincrement())
  email               String    @unique(map: "email") @db.VarChar(255)
  password            String    @db.VarChar(255)
  name                String?   @db.VarChar(255)
  default_playlist_id Int       @default(1)
  created_at          DateTime  @default(now()) @db.Timestamp(0)
  answers             answers[]
}
